<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Serving AWS S3 private content with Golang and AWS SDK for Go v2 &#183; Cozi</title><meta name=description content><link rel=stylesheet href=/scss/main.min.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel=stylesheet><script src=/js/main.min.js defer></script><meta property="og:title" content="Serving AWS S3 private content with Golang and AWS SDK for Go v2"><meta property="og:description" content="Have you ever wanted to serve private files from your AWS S3 storage to your users, but making the bucket public is not a safe option?"><meta property="og:type" content="article"><meta property="og:url" content="https://cozi.dev/posts/serving-aws-s3-private-content-with-golang-and-aws-sdk-for-go-v2/"><meta property="article:published_time" content="2024-02-05T22:08:46-06:00"><meta property="article:modified_time" content="2024-02-05T22:08:46-06:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Serving AWS S3 private content with Golang and AWS SDK for Go v2"><meta name=twitter:description content="Have you ever wanted to serve private files from your AWS S3 storage to your users, but making the bucket public is not a safe option?"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body><header class=site-header><div class=header-content><div class=nav-wrapper><div class=site-title><a href=https://cozi.dev/ class=logo-container><img class=logo src=https://cozi.dev/images/logo_light.svg title=Cozi alt=Cozi></a></div><nav class=main-nav><ul><li><a href=/about/>About</a></li><li><a href=/posts/>Posts</a></li><li><a href=/tags/>Tags</a></li><li><a href=/portfolio/>Portfolio</a></li><li><a href=/archives/>Archives</a></li><li><a href=/hire-me/>Hire me</a></li><li><button id=theme-toggle class=theme-toggle aria-label="Toggle dark mode"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></button></li></ul></nav></div><button id=mobile-menu-toggle class=mobile-menu-toggle aria-label="Toggle menu" aria-expanded=false><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button></div></header><div class=container><main class=main><div class=content><h1 class=post-title>Serving AWS S3 private content with Golang and AWS SDK for Go v2</h1><time>February 5, 2024</time><div class="toc top"><small>6 mins read</small><h6 class=toc-label>What's on this page</h6><div class=toc-body><nav id=TableOfContents><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#steps>Steps</a><ul><li><a href=#1-creating-the-aws-s3-client>1. Creating the AWS S3 client</a></li><li><a href=#2-creating-http-handler-to-serve-private-content-using-presigned-url>2. Creating HTTP handler to serve private content using presigned URL</a></li><li><a href=#3-running-the-http-server>3. Running the HTTP Server</a></li></ul></li><li><a href=#putting-it-all-together>Putting it all together</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=post-content><p><p>Have you ever wanted to serve private files from your AWS S3 storage to your users, but making the bucket public is not a safe option? In this post, I will show you how to do it using Golang and AWS SDK for Go v2 with a presigned URL, and later, you can integrate it with your own authentication system. Let&rsquo;s dive in!</p><h2 id=prerequisites>Prerequisites</h2><ul><li>Go 1.19 or later</li><li>AWS SDK for Go v2</li><li>Private S3 bucket and credentials to access it (atleast <code>s3:GetObject</code> permission)</li></ul><h2 id=steps>Steps</h2><h3 id=1-creating-the-aws-s3-client>1. Creating the AWS S3 client</h3><p>There are two options for creating the AWS S3 client:</p><p><strong>a. Using access key and secret key (not recommended for production)</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>newS3Client</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Client</span> {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>New</span>(<span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Options</span>{
        <span style=color:#a6e22e>BaseEndpoint</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;your_s3_endpoint&#34;</span>), <span style=color:#75715e>// Replace with your S3 endpoint
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>Region</span>: <span style=color:#e6db74>&#34;your_s3_region&#34;</span>, <span style=color:#75715e>// Replace with your S3 region
</span><span style=color:#75715e></span>        <span style=color:#a6e22e>Credentials</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>NewCredentialsCache</span>(
            <span style=color:#a6e22e>credentials</span>.<span style=color:#a6e22e>NewStaticCredentialsProvider</span>(
                <span style=color:#e6db74>&#34;your_access_key&#34;</span>, <span style=color:#75715e>// Replace with your AWS access key
</span><span style=color:#75715e></span>                <span style=color:#e6db74>&#34;your_secret_key&#34;</span>, <span style=color:#75715e>// Replace with your AWS secret key
</span><span style=color:#75715e></span>                <span style=color:#e6db74>&#34;&#34;</span>,
            ),
        ),
    })
}
</code></pre></div><p><strong>b. Using IAM role for service account credentials</strong></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>newS3Client</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Client</span> {
    <span style=color:#a6e22e>cfg</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>LoadDefaultConfig</span>(<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>TODO</span>(),
        <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>WithRegion</span>(<span style=color:#e6db74>&#34;your_s3_region&#34;</span>), <span style=color:#75715e>// Replace with your S3 region
</span><span style=color:#75715e></span>    )
    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
        panic(<span style=color:#a6e22e>err</span>)
    }

    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>NewFromConfig</span>(<span style=color:#a6e22e>cfg</span>)
}
</code></pre></div><h3 id=2-creating-http-handler-to-serve-private-content-using-presigned-url>2. Creating HTTP handler to serve private content using presigned URL</h3><p>Creating HTTP handler that will handle incoming requests and generate the signed URLs for private S3 content.
This function serves well for both partial content and full content.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>s3Handler</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>s3Client</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Client</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>newS3Handler</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>s3Handler</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s3Handler</span>{
		<span style=color:#a6e22e>s3Client</span>: <span style=color:#a6e22e>newS3Client</span>(),
	}
}

<span style=color:#75715e>// The servingContent function is the HTTP handler that takes a request, extracts the bucket name, object path from the parameters, 
</span><span style=color:#75715e>// generates a signed URL for the private S3 object, and then response file content to client.
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>s3Handler</span>) <span style=color:#a6e22e>servingContent</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
	<span style=color:#a6e22e>path</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>TrimLeft</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>, <span style=color:#e6db74>&#34;/&#34;</span>)
	<span style=color:#a6e22e>bucketName</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;/&#34;</span>)[<span style=color:#ae81ff>0</span>]
	<span style=color:#a6e22e>path</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Replace</span>(<span style=color:#a6e22e>path</span>, <span style=color:#a6e22e>bucketName</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#ae81ff>1</span>)

    <span style=color:#75715e>// generate presigned URL
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>presignClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>NewPresignClient</span>(<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>s3Client</span>)
	<span style=color:#a6e22e>presignedGetRequest</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>presignClient</span>.<span style=color:#a6e22e>PresignGetObject</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Context</span>(), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>GetObjectInput</span>{
		<span style=color:#a6e22e>Bucket</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>bucketName</span>),
		<span style=color:#a6e22e>Key</span>:    <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>path</span>),
		<span style=color:#a6e22e>Range</span>:  <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;Range&#34;</span>)),
	})
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to presign request: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// new http reqest
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>MethodGet</span>, <span style=color:#a6e22e>presignedGetRequest</span>.<span style=color:#a6e22e>URL</span>, <span style=color:#66d9ef>nil</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to create request: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// set request headers
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>values</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Header</span> {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>values</span> {
			<span style=color:#75715e>// ignore header: If-Modified-Since, If-None-Match to prevent status 304
</span><span style=color:#75715e></span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;If-Modified-Since&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;If-None-Match&#34;</span> {
				<span style=color:#66d9ef>continue</span>
			}

			<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>)
		}
	}
	<span style=color:#75715e>// set header no cache to prevent status 304
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Cache-Control&#34;</span>, <span style=color:#e6db74>&#34;no-cache&#34;</span>)
	<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Pragma&#34;</span>, <span style=color:#e6db74>&#34;no-cache&#34;</span>)

	<span style=color:#a6e22e>httpClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Client</span>{}
	<span style=color:#a6e22e>resp</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>httpClient</span>.<span style=color:#a6e22e>Do</span>(<span style=color:#a6e22e>req</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to get response: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}
	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>.<span style=color:#a6e22e>Close</span>()

	<span style=color:#75715e>// check status code
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span> &lt; <span style=color:#ae81ff>200</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span> &gt; <span style=color:#ae81ff>299</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to get response: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// set response headers
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>values</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Header</span> {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>values</span> {
			<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>)
		}
	}

	<span style=color:#75715e>// check if the response contains partial content
</span><span style=color:#75715e></span>    <span style=color:#75715e>// for streaming content like video, audio, etc.
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;Content-Range&#34;</span>) <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span> {
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Length&#34;</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>ContentLength</span>))
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Type&#34;</span>, <span style=color:#e6db74>&#34;application/octet-stream&#34;</span>)
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusPartialContent</span>)
	}

	<span style=color:#75715e>// write response body to client
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Copy</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>)
}
</code></pre></div><h3 id=3-running-the-http-server>3. Running the HTTP Server</h3><p>Finally, we need to start the HTTP server and register the handler.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
    <span style=color:#75715e>// register the handler
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>s3Handler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>newS3Handler</span>()
	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>s3Handler</span>.<span style=color:#a6e22e>servingContent</span>)

    <span style=color:#75715e>// start the server
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>port</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;:8080&#34;</span>
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Server start at&#34;</span>, <span style=color:#a6e22e>port</span>)
	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#a6e22e>port</span>, <span style=color:#66d9ef>nil</span>)
}
</code></pre></div><h2 id=putting-it-all-together>Putting it all together</h2><p>Here is the complete code:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>

<span style=color:#f92672>import</span> (
	<span style=color:#e6db74>&#34;fmt&#34;</span>
	<span style=color:#e6db74>&#34;io&#34;</span>
	<span style=color:#e6db74>&#34;log&#34;</span>
	<span style=color:#e6db74>&#34;net/http&#34;</span>
	<span style=color:#e6db74>&#34;strings&#34;</span>

	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/aws&#34;</span>
	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/credentials&#34;</span>
	<span style=color:#e6db74>&#34;github.com/aws/aws-sdk-go-v2/service/s3&#34;</span>
)

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
	<span style=color:#75715e>// register the handler
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>s3Handler</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>newS3Handler</span>()
	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>s3Handler</span>.<span style=color:#a6e22e>servingContent</span>)

	<span style=color:#75715e>// start the server
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>port</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;:8080&#34;</span>
	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Server start at&#34;</span>, <span style=color:#a6e22e>port</span>)
	<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServe</span>(<span style=color:#a6e22e>port</span>, <span style=color:#66d9ef>nil</span>)
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>newS3Client</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Client</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>New</span>(<span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Options</span>{
		<span style=color:#a6e22e>BaseEndpoint</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;your_s3_endpoint&#34;</span>), <span style=color:#75715e>// Replace with your S3 endpoint
</span><span style=color:#75715e></span>		<span style=color:#a6e22e>Region</span>:       <span style=color:#e6db74>&#34;your_s3_region&#34;</span>,               <span style=color:#75715e>// Replace with your S3 region
</span><span style=color:#75715e></span>		<span style=color:#a6e22e>Credentials</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>NewCredentialsCache</span>(
			<span style=color:#a6e22e>credentials</span>.<span style=color:#a6e22e>NewStaticCredentialsProvider</span>(
				<span style=color:#e6db74>&#34;your_access_key&#34;</span>, <span style=color:#75715e>// Replace with your AWS access key
</span><span style=color:#75715e></span>				<span style=color:#e6db74>&#34;your_secret_key&#34;</span>, <span style=color:#75715e>// Replace with your AWS secret key
</span><span style=color:#75715e></span>				<span style=color:#e6db74>&#34;&#34;</span>,
			),
		),
	})
}

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>s3Handler</span> <span style=color:#66d9ef>struct</span> {
	<span style=color:#a6e22e>s3Client</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>Client</span>
}

<span style=color:#66d9ef>func</span> <span style=color:#a6e22e>newS3Handler</span>() <span style=color:#f92672>*</span><span style=color:#a6e22e>s3Handler</span> {
	<span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s3Handler</span>{
		<span style=color:#a6e22e>s3Client</span>: <span style=color:#a6e22e>newS3Client</span>(),
	}
}

<span style=color:#75715e>// The servingContent function is the HTTP handler that takes a request, extracts the bucket name, object path from the parameters,
</span><span style=color:#75715e>// generates a signed URL for the private S3 object, and then response file content to client.
</span><span style=color:#75715e></span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>h</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>s3Handler</span>) <span style=color:#a6e22e>servingContent</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>r</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
	<span style=color:#a6e22e>path</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>TrimLeft</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>URL</span>.<span style=color:#a6e22e>Path</span>, <span style=color:#e6db74>&#34;/&#34;</span>)
	<span style=color:#a6e22e>bucketName</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>path</span>, <span style=color:#e6db74>&#34;/&#34;</span>)[<span style=color:#ae81ff>0</span>]
	<span style=color:#a6e22e>path</span> = <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Replace</span>(<span style=color:#a6e22e>path</span>, <span style=color:#a6e22e>bucketName</span><span style=color:#f92672>+</span><span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#e6db74>&#34;&#34;</span>, <span style=color:#ae81ff>1</span>)

	<span style=color:#75715e>// generate presigned URL
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>presignClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>NewPresignClient</span>(<span style=color:#a6e22e>h</span>.<span style=color:#a6e22e>s3Client</span>)
	<span style=color:#a6e22e>presignedGetRequest</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>presignClient</span>.<span style=color:#a6e22e>PresignGetObject</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Context</span>(), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s3</span>.<span style=color:#a6e22e>GetObjectInput</span>{
		<span style=color:#a6e22e>Bucket</span>: <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>bucketName</span>),
		<span style=color:#a6e22e>Key</span>:    <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>path</span>),
		<span style=color:#a6e22e>Range</span>:  <span style=color:#a6e22e>aws</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;Range&#34;</span>)),
	})
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to presign request: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// new http reqest
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>NewRequest</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>MethodGet</span>, <span style=color:#a6e22e>presignedGetRequest</span>.<span style=color:#a6e22e>URL</span>, <span style=color:#66d9ef>nil</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to create request: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// set request headers
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>values</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Header</span> {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>values</span> {
			<span style=color:#75715e>// ignore header: If-Modified-Since, If-None-Match to prevent status 304
</span><span style=color:#75715e></span>			<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;If-Modified-Since&#34;</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;If-None-Match&#34;</span> {
				<span style=color:#66d9ef>continue</span>
			}

			<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>)
		}
	}
	<span style=color:#75715e>// set header no cache to prevent status 304
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Cache-Control&#34;</span>, <span style=color:#e6db74>&#34;no-cache&#34;</span>)
	<span style=color:#a6e22e>req</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Pragma&#34;</span>, <span style=color:#e6db74>&#34;no-cache&#34;</span>)

	<span style=color:#a6e22e>httpClient</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Client</span>{}
	<span style=color:#a6e22e>resp</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>httpClient</span>.<span style=color:#a6e22e>Do</span>(<span style=color:#a6e22e>req</span>)
	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to get response: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}
	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>.<span style=color:#a6e22e>Close</span>()

	<span style=color:#75715e>// check status code
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span> &lt; <span style=color:#ae81ff>200</span> <span style=color:#f92672>||</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span> &gt; <span style=color:#ae81ff>299</span> {
		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;failed to get response: %v&#34;</span>, <span style=color:#a6e22e>err</span>)
		<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Error</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusText</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>), <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusInternalServerError</span>)
		<span style=color:#66d9ef>return</span>
	}

	<span style=color:#75715e>// set response headers
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>values</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Header</span> {
		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>values</span> {
			<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Add</span>(<span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>value</span>)
		}
	}

	<span style=color:#75715e>// check if the response contains partial content
</span><span style=color:#75715e></span>	<span style=color:#75715e>// for streaming content like video, audio, etc.
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Header</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;Content-Range&#34;</span>) <span style=color:#f92672>!=</span> <span style=color:#e6db74>&#34;&#34;</span> {
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Length&#34;</span>, <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%d&#34;</span>, <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>ContentLength</span>))
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>Header</span>().<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;Content-Type&#34;</span>, <span style=color:#e6db74>&#34;application/octet-stream&#34;</span>)
		<span style=color:#a6e22e>w</span>.<span style=color:#a6e22e>WriteHeader</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusPartialContent</span>)
	}

	<span style=color:#75715e>// write response body to client
</span><span style=color:#75715e></span>	<span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Copy</span>(<span style=color:#a6e22e>w</span>, <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>)
}
</code></pre></div><h2 id=conclusion>Conclusion</h2><p>In this post, we have learned how to serve private content from AWS S3 using Golang and AWS SDK for Go v2. We have created an HTTP handler that generates a presigned URL for the private S3 object and then serves the file content to the client. This approach is secure and efficient, and it allows you to serve private content from your S3 storage to your users without making the bucket public.</p><p>Furthermore, you can modify the <code>servingContent</code> function to fit your needs, such as adding authentication, authorization, or caching. For example, you can add authentication middleware to ensure that only authorized users can access the private content.</p><p>I hope you find this post helpful. Please let me know in the comment section below if you have any questions.</p></p></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"cozi-dev"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/go>#go</a>
<a class=tag href=/tags/aws>#aws</a>
<a class=tag href=/tags/s3>#s3</a></div></div><aside class=sidebar><div class=sidebar-section><h2 class=sidebar-heading>About</h2><p>Cozi is a place where I share my software development journey, exploring programming languages, frameworks, design patterns, and more.</p></div><div class=sidebar-section><h2 class=sidebar-heading>Recent Posts</h2><div class=recent-posts><div class=recent-post><a href=/posts/serving-aws-s3-private-content-with-golang-and-aws-sdk-for-go-v2/>Serving AWS S3 private content with Golang and AWS SDK for Go v2</a>
<span class=recent-post-date>Feb 5, 2024</span></div><div class=recent-post><a href=/posts/setting-up-a-virtual-environment-with-vagrant-for-testing/>Setting up a virtual environment with Vagrant for testing</a>
<span class=recent-post-date>Oct 11, 2023</span></div><div class=recent-post><a href=/posts/golang-create-combinations-from-n-arrays/>Golang Create Combinations From N Arrays</a>
<span class=recent-post-date>Sep 24, 2022</span></div><div class=recent-post><a href=/posts/mongodb-query-get-n-records-of-each-group-aggregation/>MongoDB query get n records of each group (aggregation)</a>
<span class=recent-post-date>Jul 4, 2022</span></div><div class=recent-post><a href=/posts/transfer-files-to-new-server-using-ansible/>Transfer files to new server using Ansible</a>
<span class=recent-post-date>Jun 24, 2022</span></div></div></div><div class=sidebar-section><h2 class=sidebar-heading>Tags</h2><div class=tags><a href=/tags/announcement class=tag>announcement (1)</a>
<a href=/tags/ansible class=tag>ansible (3)</a>
<a href=/tags/api class=tag>api (1)</a>
<a href=/tags/application class=tag>application (1)</a>
<a href=/tags/aws class=tag>aws (1)</a>
<a href=/tags/channels class=tag>channels (1)</a>
<a href=/tags/chat class=tag>chat (1)</a>
<a href=/tags/ci/cd class=tag>ci/cd (1)</a>
<a href=/tags/cicd class=tag>cicd (1)</a>
<a href=/tags/cli class=tag>cli (1)</a>
<a href=/tags/combination class=tag>combination (1)</a>
<a href=/tags/command class=tag>command (1)</a>
<a href=/tags/component class=tag>component (1)</a>
<a href=/tags/css class=tag>css (3)</a>
<a href=/tags/darkmode class=tag>darkmode (1)</a>
<a href=/tags/database class=tag>database (2)</a>
<a href=/tags/debug class=tag>debug (1)</a>
<a href=/tags/deployment class=tag>deployment (1)</a>
<a href=/tags/devops class=tag>devops (2)</a>
<a href=/tags/disk class=tag>disk (1)</a>
<a href=/tags/django class=tag>django (1)</a>
<a href=/tags/docker class=tag>docker (2)</a>
<a href=/tags/driver class=tag>driver (1)</a>
<a href=/tags/drone class=tag>drone (1)</a>
<a href=/tags/echo class=tag>echo (2)</a>
<a href=/tags/framework class=tag>framework (1)</a>
<a href=/tags/git class=tag>git (1)</a>
<a href=/tags/gitlab class=tag>gitlab (1)</a>
<a href=/tags/go class=tag>go (8)</a>
<a href=/tags/go-micro class=tag>go-micro (1)</a>
<a href=/tags/golang class=tag>golang (1)</a>
<a href=/tags/graceful-shutdown class=tag>graceful-shutdown (1)</a>
<a href=/tags/html class=tag>html (1)</a>
<a href=/tags/ide class=tag>ide (1)</a>
<a href=/tags/iframe class=tag>iframe (1)</a>
<a href=/tags/informercat class=tag>informercat (1)</a>
<a href=/tags/insomnia class=tag>insomnia (1)</a>
<a href=/tags/javascript class=tag>javascript (1)</a>
<a href=/tags/json class=tag>json (1)</a>
<a href=/tags/k8s class=tag>k8s (1)</a>
<a href=/tags/launch class=tag>launch (2)</a>
<a href=/tags/life class=tag>life (1)</a>
<a href=/tags/macbook class=tag>macbook (1)</a>
<a href=/tags/macos class=tag>macos (1)</a>
<a href=/tags/microservices class=tag>microservices (1)</a>
<a href=/tags/mongo class=tag>mongo (1)</a>
<a href=/tags/mongodb class=tag>mongodb (2)</a>
<a href=/tags/nosql class=tag>nosql (1)</a>
<a href=/tags/online class=tag>online (1)</a>
<a href=/tags/pre-processors class=tag>pre-processors (1)</a>
<a href=/tags/query class=tag>query (1)</a>
<a href=/tags/review class=tag>review (1)</a>
<a href=/tags/s3 class=tag>s3 (1)</a>
<a href=/tags/server class=tag>server (1)</a>
<a href=/tags/ssh class=tag>ssh (1)</a>
<a href=/tags/supics class=tag>supics (1)</a>
<a href=/tags/tailwind class=tag>tailwind (1)</a>
<a href=/tags/test class=tag>test (2)</a>
<a href=/tags/tips class=tag>tips (1)</a>
<a href=/tags/tool class=tag>tool (3)</a>
<a href=/tags/vagrant class=tag>vagrant (1)</a>
<a href=/tags/vim class=tag>vim (1)</a>
<a href=/tags/virtualbox class=tag>virtualbox (1)</a>
<a href=/tags/vm class=tag>vm (1)</a>
<a href=/tags/vscode class=tag>vscode (1)</a>
<a href=/tags/vue class=tag>vue (6)</a>
<a href=/tags/vue-cli class=tag>vue-cli (1)</a>
<a href=/tags/webpack class=tag>webpack (2)</a>
<a href=/tags/websocket class=tag>websocket (2)</a>
<a href=/tags/zero-downtime class=tag>zero-downtime (1)</a></div></div></aside></main><footer class=site-footer><div>&copy; 2025 Cozi</div><div>Powered by <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a></div></footer></div><span class=article-tags><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a href=/tags/go>go</a>
<a href=/tags/aws>aws</a>
<a href=/tags/s3>s3</a></span>
<script async src="https://sdk.owids.com/js/app.js#id=bqnb4q1ba1fujo6isg10"></script></body></html>