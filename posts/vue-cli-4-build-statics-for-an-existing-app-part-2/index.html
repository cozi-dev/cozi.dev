<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=format-detection content="telephone=no"><title>Vue CLI 4 build statics for an existing app - Part 2 | Cozi</title><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#ff3db4><meta name=theme-color content="#ffffff"><link rel=stylesheet href=https://cozi.dev/css/main.min.15431d6c334f65809fe2bc329da3f2c81c6e3027ab1e25b56afb2bb85fa7fd64.css><link rel=stylesheet href=https://cozi.dev/scss/custom.min.c80973c5727111553f7a3610d0032580b6d5a0784cd92713d2f22abf9d1335c9.css></head><body><nav><header><div class=site-title><a href=/><img id=logo src=https://cozi.dev/images/logo.svg title=Cozi alt=logo></a></div></header><div class="toc bot"><small>1 min read</small><h6 class=toc-label>What's on this page</h6><div class=toc-body><nav id=TableOfContents><ul><li><a href=#vue-cli-config-file>Vue CLI config file</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div class=nav-menu><a class="color-link nav-link" href=/about/>About</a>
<a class="color-link nav-link" href=/tags/>Tags</a>
<a class="color-link nav-link" href=/archives/>Archives</a>
<a class="color-link nav-link" href=https://cozi.dev/index.xml target=_blank rel=noopener type=application/rss+xml>RSS</a></div><footer class=footer><div class=social-icons></div><p class=credits>Built with <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> &<br><a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy</a></p></footer></nav><div id=content class=content-container><h1 class=post-title>Vue CLI 4 build statics for an existing app - Part 2</h1><time>October 23, 2020</time><div class="toc top"><small>1 min read</small><h6 class=toc-label>What's on this page</h6><div class=toc-body><nav id=TableOfContents><ul><li><a href=#vue-cli-config-file>Vue CLI config file</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></div><div><p><p>In the <a href=/posts/vue-cli-4-build-statics-for-an-existing-app/>previous part</a>, we have updated Vue CLI config to output static files that we can manually inject to anywhere. And in this part, we will optimize the config to output only one main entry script combines with hot reload.</p><h2 id=vue-cli-config-file>Vue CLI config file</h2><p>It will look very simple like this:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {
    <span style=color:#a6e22e>filenameHashing</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>, <span style=color:#75715e>// main entry js file without hashing name
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>runtimeCompiler</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
    <span style=color:#a6e22e>productionSourceMap</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
    <span style=color:#a6e22e>css</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>extract</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span>,
    },
    <span style=color:#a6e22e>chainWebpack</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>config</span> =&gt; {
        <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>plugins</span>.<span style=color:#66d9ef>delete</span>(<span style=color:#e6db74>`html`</span>)
        <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>plugins</span>.<span style=color:#66d9ef>delete</span>(<span style=color:#e6db74>`preload`</span>)
        <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>plugins</span>.<span style=color:#66d9ef>delete</span>(<span style=color:#e6db74>`prefetch`</span>)
    },
    <span style=color:#a6e22e>configureWebpack</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>optimization</span><span style=color:#f92672>:</span> {
            <span style=color:#a6e22e>splitChunks</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>false</span> <span style=color:#75715e>// this ensure we don&#39;t need to inject vendor js file
</span><span style=color:#75715e></span>        }
    },
}
</code></pre></td></tr></table></div></div><p>Next, run <code>npm run serve</code> to serve static files on the dev environment at this address <code>http://localhost:8080</code>, then you can inject <code>http://localhost:8080/js/app.js</code> into your project without worrying about injecting other assets like images, css.</p><p>If you run <code>npm run build</code> to build statics for production, it will output something like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>File                                Size                                                 Gzipped

dist/js/app.js               1325.40 KiB                                          332.74 KiB
dist/js/chunk-2c152118.js    111.30 KiB                                           31.23 KiB
dist/js/chunk-79e4a602.js    109.19 KiB                                           30.51 KiB
</code></pre></div><p>You just need to include <code>app.js</code> file only</p><h2 id=conclusion>Conclusion</h2><p>Thanks, Vue CLI, with a simple config like above, we can quickly start a new project with powerful feature like hot reload. And if you have any questions, please leave a comment below :)</p></p></div><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"cozi-dev"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a><div class=page-footer><hr class=footer-divider><a class=tag href=/tags/vue>#vue</a>
<a class=tag href=/tags/cli>#cli</a></div></div><footer class=footer-mobile><div class=social-icons></div><div class=footer-mobile-links><p class=credits>Built with <a href=https://gohugo.io target=_blank rel=noopener>Hugo</a> & <a href=https://github.com/kimcc/hugo-theme-noteworthy target=_blank rel=noopener>Noteworthy</a></p></div><script src=https://cozi.dev/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin=anonymous></script><script async src="https://sdk.owids.com/js/app.js#id=bqnb4q1ba1fujo6isg10"></script></footer></body></html>